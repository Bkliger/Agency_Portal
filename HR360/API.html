{% if request.params['endyear'] and request.params['startyear'] and request.params['startmonth'] and request.params['endmonth'] %}
{% assign entity = request.params['entity'] %}
{% assign prefix = request.params['prefix'] %}
{% fetchxml myquery %}
<fetch mapping="logical">
  <entity name="{{entity}}">
    <all-attributes />â€‹
    <filter type='and'>
      <condition attribute='{{prefix}}_startyear' operator='eq' value="{{request.params['startyear']}}" />
      <condition attribute='{{prefix}}_endyear' operator='eq' value="{{request.params['endyear']}}" />
      <condition attribute='{{prefix}}_startmonth' operator='eq' value="{{request.params['startmonth']}}" />
      <condition attribute='{{prefix}}_endmonth' operator='eq' value="{{request.params['endmonth']}}" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %}
{
  "count": "{{myquery.results.entities.size}}"
}
{% endif %}